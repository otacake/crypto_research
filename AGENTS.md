# AGENTS.md (repo root)

## 目的
本リポジトリは、日本語の原稿を作る。
狙いは「ブロックチェーン＝暗号資産の発行技術」ではなく、「中央裁定者がいない環境で、取引の順序を共有する技術」として理解させること。
完全な入門的な内容はネットに溢れているし、完全に技術的な内容もネットに溢れている。その間をつなぐ、入門的な内容からはじめて、正しさを確保しつつ、技術的なレベルまで引き上げて理解してもらうようなものを作りたい。

## 成果物と編集ルール
- 編集の本体：docs/manuscript/chapters/*.md
- 生成物（後で作る）：docs/manuscript/master.md は chapters を結合し、末尾の参考文献を `docs/references/sources.yaml` から自動付与して作る想定。手編集しない。
- 既存原稿 master6.md は現時点では触らない（移動・分割は別タスク）。

## 設計参照（執筆前に確認）
- ops/blueprint.md（全体方針・中心命題・用語導入順）
- ops/outline.md（章→節のメインメッセージ）
- ops/claims.md（主張IDと必要根拠タグ）
- ops/budget.md（章/節の文字数予算）
- docs/references/sources.yaml（一次資料候補、存在する場合）

## 文章の要件（短く固定）
- 読者が頭の中で状況を想像できる順序で書く：日常の状況 → 素朴案 → 破綻（反例） → 要件 → 仕組み。
- 用語は出した瞬間に定義する。略語は初出で Full term（英語）＋日本語説明＋略語 を書く。
- 事実に依存する主張は出典をつける、素直なMarkdown記法による引用。

## 出典運用（必須）
- 出典タグは本文末尾に付与する。形式は `[一次:S-xxx]` / `[二次:R-xxx]` を使う。
- タグに使うIDは `docs/references/sources.yaml` と一致させる。存在しないIDの使用は禁止。
- すぐ確証が取れない主張は断定しない。`[要検証:RB-xxx]` で明示し、必要に応じて `ops/research_backlog.md` に追記する。
- `docs/manuscript/master.md` には参考文献セクションを必ず付ける。ソースは `docs/references/sources.yaml` を正本とし、自動生成で反映する。

## 公開リポジトリ表記ルール
- 環境依存の絶対パスをリポジトリ内文書へ書かない（ドライブレター始まり、ホームディレクトリ直下など）。
- パスは原則としてリポジトリ相対パスで書く（例: `docs/manuscript/chapters/...`）。
- ローカルユーザー名・ローカルディレクトリ構成を公開物へ残さない。

## 文章品質ルール（必須）
- Markdown本文で「読点のたびに改行」しない。通常の段落は自然に連続して書き、改行は段落境界でのみ行う。
- 文の接続を重要視し、論理を飛ばさない。
- 曖昧な語（例: 「置く」「進める」「それ」）を多用しない。
- 「素朴案」に入る前に、まず制約条件を明示する。例えば序盤は「中央裁定者がいない状況」を先に置いてから問いを提示する。
- 「破綻」は抽象説明だけで終えない。最低2つの具体例を出し、観測者・時点・結果の不一致を明示する。
  - 例を出すときは、どういう意図でその例を出しているのか常に考えること。(どういう意図でその例を出しているのか直接本文に記載はしてはならない)
- 「破綻 → 要件」の間に橋渡し文を必ず入れる。形式は「この破綻から、何が必要条件になるか」を1〜3文で明記する。
- 1段落1メッセージを守る。1段落が長くなる場合は、意味単位で分割して読解負荷を下げる。

## 具体的な文章例
- 例えば、ブロックチェーンのP2Pをいきなり導入するのではなく、まずは現実世界の内容から出発する。
  - 今からブロックチェーンについて解説していきますが、この解説では超入門と技術的な記事の間を目指しています。なので、単に内容を列挙するのではなく、ブロックチェーンが何を解決しているのか、その問題から考えていくことで技術の理解を進めていきます。まず、我々が普段生活している世界を考えてみましょう。我々は普段さまざまなお金のやりとりをします。例えば、私は今日コンビニで300円を払って、コーヒーとパンを買いました。
- 具体的な問題設定をして、読者の頭の中を想像して、記載を進める
  - ブロックチェーンの核心は、暗号資産を発行することではない。核心は、中央裁定者がいない環境で取引順序を共有できるようにした点にある。たとえば私が同じ1000円相当を店Aと店Bに同時に送ったとしよう。銀行システムなら、どちらを正当とするかは銀行が裁定する。では、その裁定者がいない世界では、どのように順序を決めるのか。 (おれならここに順序決めないとこういう意味で困るよね？ということを持ってくる。すなわち、「そもそも順序ってなんで必要なんだっけ？」があるべき) (そのうえで、「例えば送信時刻はどうだろう？」みたいに案を出してみて、「Aには先に送ったのに、ネットワーク遅延でBが先に受け取ることがあるからだ。観測者ごとに“先”がずれる以上、時刻だけでは順序は共有できない。」ということを持ってくる。)

## 役割分離（重要）
執筆・レビュー・反映を分ける。
- 執筆：roles/writer の指示に従う
- 読者レビュー：roles/reader の指示に従う
- 反映（編集）：roles/editor の指示に従う

Codexは、repo root から現在の作業ディレクトリまでの AGENTS を連結して読み、後ろの指示が優先される。
役割を切り替えるときは、作業ディレクトリを切り替えて実行する。

# shell
- Use PowerShell
- Use encoding utf-8

